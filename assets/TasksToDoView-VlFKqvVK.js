import{d as K,g as u,S as O,c as y,a,m as f,h as T,b as i,w as d,Y,F as b,K as q,p as H,J as g,L as E,M as x,f as m,o as r,_ as Q}from"./index-D5djcD_c.js";import{F as I}from"./FontAwasomeIconToggler-YIO9lA2V.js";import{S as k}from"./StyledButton-YEnEYvQZ.js";import{S as D}from"./StyledInputByType-BSWMHF_L.js";import{u as R}from"./tasks.service-bxQMJlAZ.js";import{P as N}from"./PopUpComponent-BgRgWAft.js";import{E as B}from"./ErrorMessage-BUaYKp2C.js";const W={class:"body"},X=["onClick"],Z={class:"modal-items"},ee={class:"item-in-modal"},te={class:"item-in-modal"},le={class:"item-in-modal"},ae={class:"btn-container"},oe={class:"modal-items"},se={class:"item-in-modal"},ie={class:"item-in-modal"},de={class:"item-in-modal"},ne=K({__name:"TasksToDoView",setup(re){const{tasks:w,postNewTask:S,updateTask:U,deleteTask:A,completeTask:F}=R(),c=u([]),P=O(()=>w.value.filter(t=>!t.completed||c.value.includes(t.id)).sort((t,e)=>{const l=t.updatedAt?new Date(t.updatedAt).getTime():0;return(e.updatedAt?new Date(e.updatedAt).getTime():0)-l})),n=u(""),s={completed:!1,title:"",description:"",dueDate:""},_=()=>{s.completed=!1,s.title="",s.description="",s.dueDate="",n.value=""},v=u(!1),p=u(!1),h=u({completed:!1,id:void 0,title:"",description:"",dueDate:"",userId:void 0}),o=u({completed:!1,id:void 0,title:"",description:"",dueDate:"",userId:void 0});function M(t){return new Date(t).toISOString().slice(0,16)}function C(){v.value=!v.value,_()}function L(t){const e=w.value.find(l=>l.id===t);e&&(o.value={...e,dueDate:e.dueDate?M(e.dueDate):""}),p.value=!0}function $(){p.value=!1,h.value={completed:!1,id:void 0,title:"",description:"",dueDate:"",userId:void 0},o.value={completed:!1,id:void 0,title:"",description:"",dueDate:"",userId:void 0}}const j=async()=>{try{if(!s.title){n.value="Title cannot be blank";return}await S(s),v.value=!1,_()}catch(t){console.error("Error during task creation:",t)}},z=async()=>{try{if(o.value.id){if(!o.value.title){n.value="Title cannot be blank";return}await U(o.value),p.value=!1,n.value=""}else console.error("No task ID found for update.")}catch(t){console.error("Error during updating task:",t)}},G=async()=>{try{o.value.id?(await A(o.value),p.value=!1):console.error("No task ID found for deletion.")}catch(t){console.error("Error during deleting task:",t)}},J=async t=>{t.id&&(t.completed=!t.completed,t.completed&&c.value.push(t.id),await F(t),setTimeout(()=>{c.value=c.value.filter(e=>e!==t.id)},500))};return(t,e)=>(r(),y(b,null,[a("div",W,[i(Y,{name:"fade-slide",tag:"div"},{default:d(()=>[(r(!0),y(b,null,q(P.value,l=>(r(),y("div",{class:H(["todo-item",{completed:l.completed&&c.value.includes(l.id)}]),key:l.id},[i(I,{onClick:V=>J(l),icon1:"check-circle",icon2:"circle-notch",active:l.completed},null,8,["onClick","active"]),a("div",{class:"task-title",onClick:V=>l.id!==void 0?L(l.id):null},g(l.title),9,X)],2))),128))]),_:1})]),p.value?(r(),f(N,{key:0,onClose:$},{default:d(()=>[a("div",Z,[a("div",ee,[i(D,{label:"Title",modelValue:o.value.title,"onUpdate:modelValue":e[0]||(e[0]=l=>o.value.title=l),placeholder:"Enter task title",inputType:"text"},null,8,["modelValue"])]),a("div",te,[e[6]||(e[6]=a("div",{class:"textarea-title"},"Description",-1)),E(a("textarea",{class:"textarea-input","onUpdate:modelValue":e[1]||(e[1]=l=>o.value.description=l),placeholder:"Enter task description",rows:"4",cols:"1"},null,512),[[x,o.value.description]])]),a("div",le,[i(D,{label:"Due Date",modelValue:o.value.dueDate,"onUpdate:modelValue":e[2]||(e[2]=l=>o.value.dueDate=l),inputType:"datetime-local"},null,8,["modelValue"])]),n.value?(r(),f(B,{key:0},{default:d(()=>[m(g(n.value),1)]),_:1})):T("",!0),a("div",ae,[i(k,{onClick:z,type:"save"},{default:d(()=>e[7]||(e[7]=[m("Update")])),_:1}),i(k,{onClick:G,type:"negative"},{default:d(()=>e[8]||(e[8]=[m("Delete")])),_:1})])])]),_:1})):T("",!0),v.value?(r(),f(N,{key:1,onClose:C},{default:d(()=>[a("div",oe,[a("div",se,[i(D,{label:"Title",modelValue:s.title,"onUpdate:modelValue":e[3]||(e[3]=l=>s.title=l),placeholder:"Enter task title",inputType:"text"},null,8,["modelValue"])]),a("div",ie,[e[9]||(e[9]=a("div",{class:"textarea-title"},"Description",-1)),E(a("textarea",{class:"textarea-input","onUpdate:modelValue":e[4]||(e[4]=l=>s.description=l),placeholder:"Enter task description",rows:"4",cols:"1"},null,512),[[x,s.description]])]),a("div",de,[i(D,{label:"Due Date",modelValue:s.dueDate,"onUpdate:modelValue":e[5]||(e[5]=l=>s.dueDate=l),inputType:"datetime-local"},null,8,["modelValue"])]),n.value?(r(),f(B,{key:0},{default:d(()=>[m(g(n.value),1)]),_:1})):T("",!0),i(k,{onClick:j,type:"save"},{default:d(()=>e[10]||(e[10]=[m("Create Task")])),_:1})])]),_:1})):T("",!0),a("div",{class:"new-item",onClick:C},[i(k,{class:"new-item-btn",type:"save"},{default:d(()=>[i(I,{icon1:"plus",icon2:"plus"})]),_:1})])],64))}}),ke=Q(ne,[["__scopeId","data-v-0a8d8a6b"]]);export{ke as default};
