import{g as p,I as h,n as a}from"./index-GKEzOR5-.js";const s="https://syntra-20242025-henk-api.onrender.com/api",w=()=>{const r=`Bearer ${localStorage.getItem("token")}`,c=p([]),o=async()=>{try{const t=await a.get(`${s}/tasks`,{headers:{Authorization:r}});c.value=t.data}catch(t){console.error("Error fetching tasks: ",t)}},i=async t=>{try{const e=await a.post(`${s}/tasks`,t,{headers:{Authorization:r}});await o()}catch(e){throw console.error("Error creating new task: ",e),e}},d=async t=>{try{const e=await a.put(`${s}/tasks/${t.id}`,{completed:t.completed,title:t.title,description:t.description,dueDate:t.dueDate},{headers:{Authorization:r}});return await o(),e.data}catch(e){return console.error("Could not update task: ",e),null}},l=async t=>{try{const e=await a.delete(`${s}/tasks/${t.id}`,{headers:{Authorization:r}});return await o(),e.data}catch(e){return console.error("Could not delete task: ",e),null}},u=async t=>{const e=t.completed?`api/tasks/${t.id}/complete`:`api/tasks/${t.id}/uncomplete`;try{const n=await a.post(e.startsWith("/")?e:`/${e}`,{},{headers:{Authorization:r}});return await o(),n.data}catch(n){return console.error("Could not toggle complete: ",n),null}};return h(o),{tasks:c,postNewTask:i,updateTask:d,deleteTask:l,completeTask:u}};export{w as u};
